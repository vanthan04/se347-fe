import { useState, forwardRef } from "react";

const PasswordInput = forwardRef(({ error, ...props }, ref) => {
  const [showPassword, setShowPassword] = useState(false);

  return (
    <div className="relative mb-1">
      <input
        ref={ref}
        type={showPassword ? "text" : "password"}
        className="w-full border border-gray-300 rounded-xl px-4 py-3"
        {...props}
      />
      <button
        type="button"
        onClick={() => setShowPassword(!showPassword)}
        className="absolute right-4 top-3 text-gray-400 p-0 leading-none"
      >
        {showPassword ? (
          <svg
            width="20"
            height="20"
            viewBox="0 0 20 20"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M10.0039 12.5C11.3813 12.5 12.5039 11.3774 12.5039 9.99999C12.5039 8.62259 11.3813 7.49999 10.0039 7.49999C8.62645 7.49999 7.50391 8.62259 7.50391 9.99999C7.50391 11.3774 8.62645 12.5 10.0039 12.5Z"
              fill="currentColor"
            />
            <path
              d="M10 2.21287C4.84063 2.21287 1.90063 5.74454 0.607299 7.84954C0.207739 8.4958 -0.00390625 9.24059 -0.00390625 10.0004C-0.00390625 10.7602 0.207739 11.505 0.607299 12.1508C1.90063 14.2558 4.84063 17.7875 10 17.7875C15.1594 17.7875 18.0994 14.2558 19.3927 12.1508C19.7923 11.505 20.0039 10.7602 20.0039 10.0004C20.0039 9.24059 19.7923 8.4958 19.3927 7.84954C18.0994 5.74454 15.1594 2.21287 10 2.21287ZM18.3354 10.0004C18.3354 10.452 18.2097 10.8947 17.9723 11.2788C16.8606 13.0838 14.3481 16.1213 9.9998 16.1213C5.65147 16.1213 3.13897 13.0838 2.0273 11.2788C1.78991 10.8947 1.66417 10.452 1.66417 10.0004C1.66417 9.54884 1.78991 9.1062 2.0273 8.72207C3.13897 6.91707 5.65147 3.87957 9.9998 3.87957C14.3481 3.87957 16.8606 6.91707 17.9723 8.72207C18.2097 9.1062 18.3354 9.54884 18.3354 10.0004Z"
              fill="currentColor"
            />
          </svg>
        ) : (
          <svg
            width="20"
            height="20"
            viewBox="0 0 20 20"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g clipPath="url(#clip0_69_345)">
              <path
                d="M19.3923 7.84904C18.64 6.61714 17.6911 5.51675 16.5831 4.59154L18.9165 2.25821C19.0683 2.10104 19.1523 1.89054 19.1504 1.67204C19.1485 1.45354 19.0608 1.24453 18.9063 1.09003C18.7518 0.935518 18.5428 0.847877 18.3243 0.845979C18.1058 0.84408 17.8953 0.928075 17.7381 1.07987L15.2006 3.62071C13.6276 2.68639 11.8293 2.19943 9.9998 2.21237C4.84063 2.21237 1.90063 5.74404 0.607299 7.84904C0.207739 8.4953 -0.00390625 9.24008 -0.00390625 9.99987C-0.00390625 10.7597 0.207739 11.5045 0.607299 12.1507C1.3596 13.3826 2.30854 14.483 3.41646 15.4082L1.08313 17.7415C1.00354 17.8184 0.940055 17.9104 0.896381 18.012C0.852707 18.1137 0.829718 18.2231 0.828757 18.3337C0.827795 18.4444 0.84888 18.5541 0.890781 18.6565C0.932681 18.7589 0.994559 18.852 1.0728 18.9302C1.15105 19.0084 1.24409 19.0703 1.3465 19.1122C1.44892 19.1541 1.55865 19.1752 1.6693 19.1742C1.77995 19.1733 1.8893 19.1503 1.99097 19.1066C2.09264 19.063 2.18459 18.9995 2.26147 18.9199L4.8048 16.3765C6.37585 17.3107 8.17202 17.7985 9.9998 17.7874C15.159 17.7874 18.099 14.2557 19.3923 12.1507C19.7919 11.5045 20.0035 10.7597 20.0035 9.99987C20.0035 9.24008 19.7919 8.4953 19.3923 7.84904ZM2.0273 11.2782C1.78991 10.8941 1.66417 10.4514 1.66417 9.99987C1.66417 9.54831 1.78991 9.10567 2.0273 8.72154C3.13897 6.91654 5.65147 3.87904 9.9998 3.87904C11.3834 3.87129 12.7475 4.20474 13.9715 4.84987L12.294 6.52737C11.4939 5.99621 10.5347 5.7582 9.57916 5.85375C8.6236 5.94929 7.73052 6.37249 7.05147 7.05154C6.37241 7.7306 5.94921 8.62367 5.85367 9.57923C5.75813 10.5348 5.99613 11.494 6.5273 12.294L4.6023 14.219C3.58155 13.3938 2.7105 12.399 2.0273 11.2782ZM12.4998 9.99987C12.4998 10.6629 12.2364 11.2988 11.7676 11.7676C11.2987 12.2365 10.6628 12.4999 9.9998 12.4999C9.62856 12.4984 9.26246 12.413 8.92897 12.2499L12.2498 8.92904C12.4129 9.26254 12.4984 9.62863 12.4998 9.99987ZM7.4998 9.99987C7.4998 9.33683 7.76319 8.70095 8.23203 8.23211C8.70087 7.76327 9.33676 7.49987 9.9998 7.49987C10.371 7.50131 10.7371 7.58678 11.0706 7.74987L7.7498 11.0707C7.58671 10.7372 7.50124 10.3711 7.4998 9.99987ZM17.9723 11.2782C16.8606 13.0832 14.3481 16.1207 9.9998 16.1207C8.61624 16.1285 7.2521 15.795 6.02813 15.1499L7.70563 13.4724C8.50569 14.0035 9.46488 14.2415 10.4204 14.146C11.376 14.0505 12.2691 13.6273 12.9481 12.9482C13.6272 12.2692 14.0504 11.3761 14.1459 10.4205C14.2415 9.46495 14.0035 8.50576 13.4723 7.70571L15.3973 5.78071C16.418 6.60594 17.2891 7.60075 17.9723 8.72154C18.2097 9.10567 18.3354 9.54831 18.3354 9.99987C18.3354 10.4514 18.2097 10.8941 17.9723 11.2782Z"
                fill="currentColor"
              />
            </g>
            <defs>
              <clipPath id="clip0_69_345">
                <rect width="20" height="20" fill="white" />
              </clipPath>
            </defs>
          </svg>
        )}
      </button>
    </div>
  );
});

PasswordInput.displayName = "PasswordInput";

export default PasswordInput;
